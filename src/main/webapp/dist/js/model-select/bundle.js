/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 15);
/******/ })
/************************************************************************/
/******/ ({

/***/ 15:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(16);


/***/ }),

/***/ 16:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


// Generated by CoffeeScript 1.4.0
(function () {
  var $;

  $ = window.jQuery || window.Zepto || window.$;

  $.fn.fancySelect = function (opts) {
    var isiOS, settings;
    if (opts == null) {
      opts = {};
    }
    settings = $.extend({
      forceiOS: false,
      includeBlank: false,
      optionTemplate: function optionTemplate(optionEl) {
        return optionEl.text();
      },
      triggerTemplate: function triggerTemplate(optionEl) {
        return optionEl.text();
      }
    }, opts);
    isiOS = !!navigator.userAgent.match(/iP(hone|od|ad)/i);
    return this.each(function () {
      var copyOptionsToList, disabled, options, sel, trigger, updateTriggerText, wrapper;
      sel = $(this);
      if (sel.hasClass('fancified') || sel[0].tagName !== 'SELECT') {
        return;
      }
      sel.addClass('fancified');
      sel.css({
        width: 1,
        height: 1,
        display: 'block',
        position: 'absolute',
        top: 0,
        left: 0,
        opacity: 0
      });
      sel.wrap('<div class="fancy-select">');
      wrapper = sel.parent();
      if (sel.data('class')) {
        wrapper.addClass(sel.data('class'));
      }
      wrapper.append('<div class="trigger">');
      if (!(isiOS && !settings.forceiOS)) {
        wrapper.append('<ul class="options">');
      }
      trigger = wrapper.find('.trigger');
      options = wrapper.find('.options');
      disabled = sel.prop('disabled');
      if (disabled) {
        wrapper.addClass('disabled');
      }
      updateTriggerText = function updateTriggerText() {
        var triggerHtml;
        triggerHtml = settings.triggerTemplate(sel.find(':selected'));
        return trigger.html(triggerHtml);
      };
      sel.on('blur.fs', function () {
        if (trigger.hasClass('open')) {
          return setTimeout(function () {
            return trigger.trigger('close.fs');
          }, 120);
        }
      });
      trigger.on('close.fs', function () {
        trigger.removeClass('open');
        return options.removeClass('open');
      });
      trigger.on('click.fs', function () {
        var offParent, parent;
        if (!disabled) {
          trigger.toggleClass('open');
          if (isiOS && !settings.forceiOS) {
            if (trigger.hasClass('open')) {
              return sel.focus();
            }
          } else {
            if (trigger.hasClass('open')) {
              parent = trigger.parent();
              offParent = parent.offsetParent();
              if (parent.offset().top + parent.outerHeight() + options.outerHeight() + 20 > $(window).height() + $(window).scrollTop()) {
                options.addClass('overflowing');
              } else {
                options.removeClass('overflowing');
              }
            }
            options.toggleClass('open');
            if (!isiOS) {
              return sel.focus();
            }
          }
        }
      });
      sel.on('enable', function () {
        sel.prop('disabled', false);
        wrapper.removeClass('disabled');
        disabled = false;
        return copyOptionsToList();
      });
      sel.on('disable', function () {
        sel.prop('disabled', true);
        wrapper.addClass('disabled');
        return disabled = true;
      });
      sel.on('change.fs', function (e) {
        if (e.originalEvent && e.originalEvent.isTrusted) {
          return e.stopPropagation();
        } else {
          return updateTriggerText();
        }
      });
      sel.on('keydown', function (e) {
        var hovered, newHovered, w;
        w = e.which;
        hovered = options.find('.hover');
        hovered.removeClass('hover');
        if (!options.hasClass('open')) {
          if (w === 13 || w === 32 || w === 38 || w === 40) {
            e.preventDefault();
            return trigger.trigger('click.fs');
          }
        } else {
          if (w === 38) {
            e.preventDefault();
            if (hovered.length && hovered.index() > 0) {
              hovered.prev().addClass('hover');
            } else {
              options.find('li:last-child').addClass('hover');
            }
          } else if (w === 40) {
            e.preventDefault();
            if (hovered.length && hovered.index() < options.find('li').length - 1) {
              hovered.next().addClass('hover');
            } else {
              options.find('li:first-child').addClass('hover');
            }
          } else if (w === 27) {
            e.preventDefault();
            trigger.trigger('click.fs');
          } else if (w === 13 || w === 32) {
            e.preventDefault();
            hovered.trigger('click.fs');
          } else if (w === 9) {
            if (trigger.hasClass('open')) {
              trigger.trigger('close.fs');
            }
          }
          newHovered = options.find('.hover');
          if (newHovered.length) {
            options.scrollTop(0);
            return options.scrollTop(newHovered.position().top - 12);
          }
        }
      });
      options.on('click.fs', 'li', function (e) {
        var clicked;
        clicked = $(this);
        sel.val(clicked.data('raw-value'));
        if (!isiOS) {
          sel.trigger('blur.fs').trigger('focus.fs');
        }
        options.find('.selected').removeClass('selected');
        clicked.addClass('selected');
        trigger.addClass('selected');

        /* 修改form表单 */
        if (clicked.attr("data-raw-value") == 1) {
          $("#search-form").attr("action", "mobile_result.jsp");
        } else if (clicked.attr("data-raw-value") == 2) {
          $("#search-form").attr("action", "http://139.129.96.158:8080/DeepAnswer/front/developerAction!answer.action");
        }

        /* 修改form表单 */
        return sel.val(clicked.data('raw-value')).trigger('change.fs').trigger('blur.fs').trigger('focus.fs');
      });
      options.on('mouseenter.fs', 'li', function () {
        var hovered, nowHovered;
        nowHovered = $(this);
        hovered = options.find('.hover');
        hovered.removeClass('hover');
        return nowHovered.addClass('hover');
      });
      options.on('mouseleave.fs', 'li', function () {
        return options.find('.hover').removeClass('hover');
      });
      copyOptionsToList = function copyOptionsToList() {
        var selOpts;
        updateTriggerText();
        if (isiOS && !settings.forceiOS) {
          return;
        }
        selOpts = sel.find('option');
        return sel.find('option').each(function (i, opt) {
          var optHtml;
          opt = $(opt);
          if (!opt.prop('disabled') && (opt.val() || settings.includeBlank)) {
            optHtml = settings.optionTemplate(opt);
            if (opt.prop('selected')) {
              return options.append("<li data-raw-value=\"" + opt.val() + "\" class=\"selected\">" + optHtml + "</li>");
            } else {
              return options.append("<li data-raw-value=\"" + opt.val() + "\">" + optHtml + "</li>");
            }
          }
        });
      };
      sel.on('update.fs', function () {
        wrapper.find('.options').empty();
        return copyOptionsToList();
      });
      return copyOptionsToList();
    });
  };
}).call(undefined);

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgYmIwNjAxYzJlMmNhNmVjYjU4YWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21vZGVsLXNlbGVjdC9mYW5jeS1zZWxlY3QuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImpRdWVyeSIsIlplcHRvIiwiZm4iLCJmYW5jeVNlbGVjdCIsIm9wdHMiLCJpc2lPUyIsInNldHRpbmdzIiwiZXh0ZW5kIiwiZm9yY2VpT1MiLCJpbmNsdWRlQmxhbmsiLCJvcHRpb25UZW1wbGF0ZSIsIm9wdGlvbkVsIiwidGV4dCIsInRyaWdnZXJUZW1wbGF0ZSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIm1hdGNoIiwiZWFjaCIsImNvcHlPcHRpb25zVG9MaXN0IiwiZGlzYWJsZWQiLCJvcHRpb25zIiwic2VsIiwidHJpZ2dlciIsInVwZGF0ZVRyaWdnZXJUZXh0Iiwid3JhcHBlciIsImhhc0NsYXNzIiwidGFnTmFtZSIsImFkZENsYXNzIiwiY3NzIiwid2lkdGgiLCJoZWlnaHQiLCJkaXNwbGF5IiwicG9zaXRpb24iLCJ0b3AiLCJsZWZ0Iiwib3BhY2l0eSIsIndyYXAiLCJwYXJlbnQiLCJkYXRhIiwiYXBwZW5kIiwiZmluZCIsInByb3AiLCJ0cmlnZ2VySHRtbCIsImh0bWwiLCJvbiIsInNldFRpbWVvdXQiLCJyZW1vdmVDbGFzcyIsIm9mZlBhcmVudCIsInRvZ2dsZUNsYXNzIiwiZm9jdXMiLCJvZmZzZXRQYXJlbnQiLCJvZmZzZXQiLCJvdXRlckhlaWdodCIsInNjcm9sbFRvcCIsImUiLCJvcmlnaW5hbEV2ZW50IiwiaXNUcnVzdGVkIiwic3RvcFByb3BhZ2F0aW9uIiwiaG92ZXJlZCIsIm5ld0hvdmVyZWQiLCJ3Iiwid2hpY2giLCJwcmV2ZW50RGVmYXVsdCIsImxlbmd0aCIsImluZGV4IiwicHJldiIsIm5leHQiLCJjbGlja2VkIiwidmFsIiwiYXR0ciIsIm5vd0hvdmVyZWQiLCJzZWxPcHRzIiwiaSIsIm9wdCIsIm9w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QUEwQmdDLElBQUlMLEdBQUosTUFBYTlELFNBQVNHLFlBQWhELENBQUosRUFBbUU7QUFDakVpRSxzQkFBVXBFLFNBQVNJLGNBQVQsQ0FBd0IrRCxHQUF4QixDQUFWO0FBQ0EsZ0JBQUlBLElBQUloQyxJQUFKLENBQVMsVUFBVCxDQUFKLEVBQTBCO0FBQ3hCLHFCQUFPckIsUUFBUW1CLE1BQVIsQ0FBZSwwQkFBMkJrQyxJQUFJTCxHQUFKLEVBQTNCLEdBQXdDLHdCQUF4QyxHQUFtRU0sT0FBbkUsR0FBNkUsT0FBNUYsQ0FBUDtBQUNELGFBRkQsTUFFTztBQUNMLHFCQUFPdEQsUUFBUW1CLE1BQVIsQ0FBZSwwQkFBMkJrQyxJQUFJTCxHQUFKLEVBQTNCLEdBQXdDLEtBQXhDLEdBQWdETSxPQUFoRCxHQUEwRCxPQUF6RSxDQUFQO0FBQ0Q7QUFDRjtBQUNGLFNBWE0sQ0FBUDtBQVlELE9BbkJEO0FBb0JBckQsVUFBSXVCLEVBQUosQ0FBTyxXQUFQLEVBQW9CLFlBQVc7QUFDN0JwQixnQkFBUWdCLElBQVIsQ0FBYSxVQUFiLEVBQXlCbUMsS0FBekI7QUFDQSxlQUFPekQsbUJBQVA7QUFDRCxPQUhEO0FBSUEsYUFBT0EsbUJBQVA7QUFDRCxLQTlMTSxDQUFQO0FBK0xELEdBL01EO0FBaU5ELENBdE5ELEVBc05HMEQsSUF0TkgsWSIsImZpbGUiOiJqcy9tb2RlbC1zZWxlY3QvYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTUpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGJiMDYwMWMyZTJjYTZlY2I1OGFlIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjQuMFxuKGZ1bmN0aW9uKCkge1xuICB2YXIgJDtcblxuICAkID0gd2luZG93LmpRdWVyeSB8fCB3aW5kb3cuWmVwdG8gfHwgd2luZG93LiQ7XG5cbiAgJC5mbi5mYW5jeVNlbGVjdCA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICB2YXIgaXNpT1MsIHNldHRpbmdzO1xuICAgIGlmIChvcHRzID09IG51bGwpIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG4gICAgc2V0dGluZ3MgPSAkLmV4dGVuZCh7XG4gICAgICBmb3JjZWlPUzogZmFsc2UsXG4gICAgICBpbmNsdWRlQmxhbms6IGZhbHNlLFxuICAgICAgb3B0aW9uVGVtcGxhdGU6IGZ1bmN0aW9uKG9wdGlvbkVsKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25FbC50ZXh0KCk7XG4gICAgICB9LFxuICAgICAgdHJpZ2dlclRlbXBsYXRlOiBmdW5jdGlvbihvcHRpb25FbCkge1xuICAgICAgICByZXR1cm4gb3B0aW9uRWwudGV4dCgpO1xuICAgICAgfVxuICAgIH0sIG9wdHMpO1xuICAgIGlzaU9TID0gISFuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUChob25lfG9kfGFkKS9pKTtcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNvcHlPcHRpb25zVG9MaXN0LCBkaXNhYmxlZCwgb3B0aW9ucywgc2VsLCB0cmlnZ2VyLCB1cGRhdGVUcmlnZ2VyVGV4dCwgd3JhcHBlcjtcbiAgICAgIHNlbCA9ICQodGhpcyk7XG4gICAgICBpZiAoc2VsLmhhc0NsYXNzKCdmYW5jaWZpZWQnKSB8fCBzZWxbMF0udGFnTmFtZSAhPT0gJ1NFTEVDVCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VsLmFkZENsYXNzKCdmYW5jaWZpZWQnKTtcbiAgICAgIHNlbC5jc3Moe1xuICAgICAgICB3aWR0aDogMSxcbiAgICAgICAgaGVpZ2h0OiAxLFxuICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICBvcGFjaXR5OiAwXG4gICAgICB9KTtcbiAgICAgIHNlbC53cmFwKCc8ZGl2IGNsYXNzPVwiZmFuY3ktc2VsZWN0XCI+Jyk7XG4gICAgICB3cmFwcGVyID0gc2VsLnBhcmVudCgpO1xuICAgICAgaWYgKHNlbC5kYXRhKCdjbGFzcycpKSB7XG4gICAgICAgIHdyYXBwZXIuYWRkQ2xhc3Moc2VsLmRhdGEoJ2NsYXNzJykpO1xuICAgICAgfVxuICAgICAgd3JhcHBlci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJ0cmlnZ2VyXCI+Jyk7XG4gICAgICBpZiAoIShpc2lPUyAmJiAhc2V0dGluZ3MuZm9yY2VpT1MpKSB7XG4gICAgICAgIHdyYXBwZXIuYXBwZW5kKCc8dWwgY2xhc3M9XCJvcHRpb25zXCI+Jyk7XG4gICAgICB9XG4gICAgICB0cmlnZ2VyID0gd3JhcHBlci5maW5kKCcudHJpZ2dlcicpO1xuICAgICAgb3B0aW9ucyA9IHdyYXBwZXIuZmluZCgnLm9wdGlvbnMnKTtcbiAgICAgIGRpc2FibGVkID0gc2VsLnByb3AoJ2Rpc2FibGVkJyk7XG4gICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgd3JhcHBlci5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZVRyaWdnZXJUZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0cmlnZ2VySHRtbDtcbiAgICAgICAgdHJpZ2dlckh0bWwgPSBzZXR0aW5ncy50cmlnZ2VyVGVtcGxhdGUoc2VsLmZpbmQoJzpzZWxlY3RlZCcpKTtcbiAgICAgICAgcmV0dXJuIHRyaWdnZXIuaHRtbCh0cmlnZ2VySHRtbCk7XG4gICAgICB9O1xuICAgICAgc2VsLm9uKCdibHVyLmZzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0cmlnZ2VyLmhhc0NsYXNzKCdvcGVuJykpIHtcbiAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0cmlnZ2VyLnRyaWdnZXIoJ2Nsb3NlLmZzJyk7XG4gICAgICAgICAgfSwgMTIwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0cmlnZ2VyLm9uKCdjbG9zZS5mcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICB0cmlnZ2VyLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgIHJldHVybiBvcHRpb25zLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgICB9KTtcbiAgICAgIHRyaWdnZXIub24oJ2NsaWNrLmZzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvZmZQYXJlbnQsIHBhcmVudDtcbiAgICAgICAgaWYgKCFkaXNhYmxlZCkge1xuICAgICAgICAgIHRyaWdnZXIudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICBpZiAoaXNpT1MgJiYgIXNldHRpbmdzLmZvcmNlaU9TKSB7XG4gICAgICAgICAgICBpZiAodHJpZ2dlci5oYXNDbGFzcygnb3BlbicpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzZWwuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRyaWdnZXIuaGFzQ2xhc3MoJ29wZW4nKSkge1xuICAgICAgICAgICAgICBwYXJlbnQgPSB0cmlnZ2VyLnBhcmVudCgpO1xuICAgICAgICAgICAgICBvZmZQYXJlbnQgPSBwYXJlbnQub2Zmc2V0UGFyZW50KCk7XG4gICAgICAgICAgICAgIGlmICgocGFyZW50Lm9mZnNldCgpLnRvcCArIHBhcmVudC5vdXRlckhlaWdodCgpICsgb3B0aW9ucy5vdXRlckhlaWdodCgpICsgMjApID4gJCh3aW5kb3cpLmhlaWdodCgpICsgJCh3aW5kb3cpLnNjcm9sbFRvcCgpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5hZGRDbGFzcygnb3ZlcmZsb3dpbmcnKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnJlbW92ZUNsYXNzKCdvdmVyZmxvd2luZycpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zLnRvZ2dsZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICBpZiAoIWlzaU9TKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzZWwuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgc2VsLm9uKCdlbmFibGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICB3cmFwcGVyLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICBkaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gY29weU9wdGlvbnNUb0xpc3QoKTtcbiAgICAgIH0pO1xuICAgICAgc2VsLm9uKCdkaXNhYmxlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB3cmFwcGVyLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICByZXR1cm4gZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgfSk7XG4gICAgICBzZWwub24oJ2NoYW5nZS5mcycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUub3JpZ2luYWxFdmVudCAmJiBlLm9yaWdpbmFsRXZlbnQuaXNUcnVzdGVkKSB7XG4gICAgICAgICAgcmV0dXJuIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHVwZGF0ZVRyaWdnZXJUZXh0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgc2VsLm9uKCdrZXlkb3duJywgZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgaG92ZXJlZCwgbmV3SG92ZXJlZCwgdztcbiAgICAgICAgdyA9IGUud2hpY2g7XG4gICAgICAgIGhvdmVyZWQgPSBvcHRpb25zLmZpbmQoJy5ob3ZlcicpO1xuICAgICAgICBob3ZlcmVkLnJlbW92ZUNsYXNzKCdob3ZlcicpO1xuICAgICAgICBpZiAoIW9wdGlvbnMuaGFzQ2xhc3MoJ29wZW4nKSkge1xuICAgICAgICAgIGlmICh3ID09PSAxMyB8fCB3ID09PSAzMiB8fCB3ID09PSAzOCB8fCB3ID09PSA0MCkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRyaWdnZXIudHJpZ2dlcignY2xpY2suZnMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHcgPT09IDM4KSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAoaG92ZXJlZC5sZW5ndGggJiYgaG92ZXJlZC5pbmRleCgpID4gMCkge1xuICAgICAgICAgICAgICBob3ZlcmVkLnByZXYoKS5hZGRDbGFzcygnaG92ZXInKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9wdGlvbnMuZmluZCgnbGk6bGFzdC1jaGlsZCcpLmFkZENsYXNzKCdob3ZlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAodyA9PT0gNDApIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmIChob3ZlcmVkLmxlbmd0aCAmJiBob3ZlcmVkLmluZGV4KCkgPCBvcHRpb25zLmZpbmQoJ2xpJykubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICBob3ZlcmVkLm5leHQoKS5hZGRDbGFzcygnaG92ZXInKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9wdGlvbnMuZmluZCgnbGk6Zmlyc3QtY2hpbGQnKS5hZGRDbGFzcygnaG92ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHcgPT09IDI3KSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0cmlnZ2VyLnRyaWdnZXIoJ2NsaWNrLmZzJyk7XG4gICAgICAgICAgfSBlbHNlIGlmICh3ID09PSAxMyB8fCB3ID09PSAzMikge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaG92ZXJlZC50cmlnZ2VyKCdjbGljay5mcycpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodyA9PT0gOSkge1xuICAgICAgICAgICAgaWYgKHRyaWdnZXIuaGFzQ2xhc3MoJ29wZW4nKSkge1xuICAgICAgICAgICAgICB0cmlnZ2VyLnRyaWdnZXIoJ2Nsb3NlLmZzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIG5ld0hvdmVyZWQgPSBvcHRpb25zLmZpbmQoJy5ob3ZlcicpO1xuICAgICAgICAgIGlmIChuZXdIb3ZlcmVkLmxlbmd0aCkge1xuICAgICAgICAgICAgb3B0aW9ucy5zY3JvbGxUb3AoMCk7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5zY3JvbGxUb3AobmV3SG92ZXJlZC5wb3NpdGlvbigpLnRvcCAtIDEyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgb3B0aW9ucy5vbignY2xpY2suZnMnLCAnbGknLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBjbGlja2VkO1xuICAgICAgICBjbGlja2VkID0gJCh0aGlzKTtcbiAgICAgICAgc2VsLnZhbChjbGlja2VkLmRhdGEoJ3Jhdy12YWx1ZScpKTtcbiAgICAgICAgaWYgKCFpc2lPUykge1xuICAgICAgICAgIHNlbC50cmlnZ2VyKCdibHVyLmZzJykudHJpZ2dlcignZm9jdXMuZnMnKTtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zLmZpbmQoJy5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICBjbGlja2VkLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICB0cmlnZ2VyLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICBcbiAgICAgICAgLyog5L+u5pS5Zm9ybeihqOWNlSAqL1xuICAgICAgICBpZihjbGlja2VkLmF0dHIoXCJkYXRhLXJhdy12YWx1ZVwiKSA9PSAxKSB7XG4gICAgICAgIFx0JChcIiNzZWFyY2gtZm9ybVwiKS5hdHRyKFwiYWN0aW9uXCIsIFwibW9iaWxlX3Jlc3VsdC5qc3BcIik7XG4gICAgICAgIH0gZWxzZSBpZihjbGlja2VkLmF0dHIoXCJkYXRhLXJhdy12YWx1ZVwiKSA9PSAyKeOAgHtcbiAgICAgICAgXHQkKFwiI3NlYXJjaC1mb3JtXCIpLmF0dHIoXCJhY3Rpb25cIiwgXCJodHRwOi8vMTM5LjEyOS45Ni4xNTg6ODA4MC9EZWVwQW5zd2VyL2Zyb250L2RldmVsb3BlckFjdGlvbiFhbnN3ZXIuYWN0aW9uXCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgLyog5L+u5pS5Zm9ybeihqOWNlSAqL1xuICAgICAgICByZXR1cm4gc2VsLnZhbChjbGlja2VkLmRhdGEoJ3Jhdy12YWx1ZScpKS50cmlnZ2VyKCdjaGFuZ2UuZnMnKS50cmlnZ2VyKCdibHVyLmZzJykudHJpZ2dlcignZm9jdXMuZnMnKTtcbiAgICAgIH0pO1xuICAgICAgb3B0aW9ucy5vbignbW91c2VlbnRlci5mcycsICdsaScsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaG92ZXJlZCwgbm93SG92ZXJlZDtcbiAgICAgICAgbm93SG92ZXJlZCA9ICQodGhpcyk7XG4gICAgICAgIGhvdmVyZWQgPSBvcHRpb25zLmZpbmQoJy5ob3ZlcicpO1xuICAgICAgICBob3ZlcmVkLnJlbW92ZUNsYXNzKCdob3ZlcicpO1xuICAgICAgICByZXR1cm4gbm93SG92ZXJlZC5hZGRDbGFzcygnaG92ZXInKTtcbiAgICAgIH0pO1xuICAgICAgb3B0aW9ucy5vbignbW91c2VsZWF2ZS5mcycsICdsaScsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5maW5kKCcuaG92ZXInKS5yZW1vdmVDbGFzcygnaG92ZXInKTtcbiAgICAgIH0pO1xuICAgICAgY29weU9wdGlvbnNUb0xpc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNlbE9wdHM7XG4gICAgICAgIHVwZGF0ZVRyaWdnZXJUZXh0KCk7XG4gICAgICAgIGlmIChpc2lPUyAmJiAhc2V0dGluZ3MuZm9yY2VpT1MpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2VsT3B0cyA9IHNlbC5maW5kKCdvcHRpb24nKTtcbiAgICAgICAgcmV0dXJuIHNlbC5maW5kKCdvcHRpb24nKS5lYWNoKGZ1bmN0aW9uKGksIG9wdCkge1xuICAgICAgICAgIHZhciBvcHRIdG1sO1xuICAgICAgICAgIG9wdCA9ICQob3B0KTtcbiAgICAgICAgICBpZiAoIW9wdC5wcm9wKCdkaXNhYmxlZCcpICYmIChvcHQudmFsKCkgfHwgc2V0dGluZ3MuaW5jbHVkZUJsYW5rKSkge1xuICAgICAgICAgICAgb3B0SHRtbCA9IHNldHRpbmdzLm9wdGlvblRlbXBsYXRlKG9wdCk7XG4gICAgICAgICAgICBpZiAob3B0LnByb3AoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuYXBwZW5kKFwiPGxpIGRhdGEtcmF3LXZhbHVlPVxcXCJcIiArIChvcHQudmFsKCkpICsgXCJcXFwiIGNsYXNzPVxcXCJzZWxlY3RlZFxcXCI+XCIgKyBvcHRIdG1sICsgXCI8L2xpPlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmFwcGVuZChcIjxsaSBkYXRhLXJhdy12YWx1ZT1cXFwiXCIgKyAob3B0LnZhbCgpKSArIFwiXFxcIj5cIiArIG9wdEh0bWwgKyBcIjwvbGk+XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgc2VsLm9uKCd1cGRhdGUuZnMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgd3JhcHBlci5maW5kKCcub3B0aW9ucycpLmVtcHR5KCk7XG4gICAgICAgIHJldHVybiBjb3B5T3B0aW9uc1RvTGlzdCgpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gY29weU9wdGlvbnNUb0xpc3QoKTtcbiAgICB9KTtcbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9qcy9tb2RlbC1zZWxlY3QvZmFuY3ktc2VsZWN0LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==